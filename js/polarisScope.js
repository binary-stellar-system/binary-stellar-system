(()=>{"use strict";const e=window.navigator,t=e.userAgent.replace(/\(|\)/g,"").split(" ").filter((e=>{const t=e.toLowerCase();return t.indexOf("/")>-1&&!t.startsWith("gecko")&&!t.startsWith("safari")&&!t.startsWith("applewebkit")&&!t.startsWith("mozilla")})),n=t[t.length-1],o=parseFloat(n.split("/")[1]),i=n.split("/")[0],r="version"===i.toLowerCase()?"Safari":i,s={capabilitiesDetected:!1,hasJscript:!1,hasActiveX:!1,isDOMCapable:!1,isAJAXCapable:!1,hasCookiesEnabled:e.cookieEnabled,name:r,uaName:r,OS:e.platform,uaOS:e.platform,userAgent:e.userAgent,appVersion:o,uaAppVersion:o,version:o,uaOSVersion:"",onLoadEventStack:[],onDOMReadyEventStack:[],touchEnabled:!1,includeStack:[],scriptLoadStack:[],scriptLocation:""},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(window.attachEvent&&!window.addEventListener){const o=e.attachEvent("on"+t,n);if(!o)throw"Event "+t+" could not be added!";return o}return e.addEventListener(t,n,o)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(window.detachEvent&&!window.removeEventListener){const o=e.detachEvent("on"+t,n);if(!o)throw"Event "+t+" could not be removed!";return o}return e.removeEventListener(t,n,o)},c=e=>window.event?window.event:e,d=e=>{const t=c(e);let n;return t.srcElement?n=t.srcElement:t.target&&(n=t.target),n},h=e=>{const t=c(e);let n=0;return t.pageX?n=t.pageX:t.clientX&&(n=t.clientX),n},u=e=>{const t=c(e);let n=0;return t.pageY?n=t.pageY:t.clientY&&(n=t.clientY),n};let g,f;document.createEvent&&(g=(e,t,n)=>{let o=document.createEvent("Event");if(o)return n||(n={}),n.canBubble||(n.canBubble=!0),n.cancellable||(n.cancellable=!0),o.initEvent("Event",n.canBubble,n.cancellable),o},f=function(e){document.dispatchEvent(e)});function w(e,t,n){return n instanceof e||(typeof n).toLowerCase()===t}function m(e){return w(String,"string",e)}function p(e){return w(Object,"object",e)}function v(e){let t=e.nodeName;return t=t||"","textarea"===t.toLowerCase()}function b(e){let t=typeof e,n=e.nodeName;return n=n||"","input"===n.toLowerCase()||"input"===t.toLowerCase()&&void 0!==t.type}a(window,"load",(function(){let e,t,n=s.onLoadEventStack;e=n.length;for(let o=0;o<e;o+=1)t=n[o],t&&"function"===(typeof t).toLowerCase()&&t()}),!1);const A=/^#(?:([\w-]+)|(\w+)|\.([\w-]+))$/;function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(!m(e)&&p(e)&&e.hasOwnProperty("objectName")&&"selector"===e.objectName)return e;let n,o=e;e instanceof HTMLElement&&(e.id?o="#"+e.id:(o=e.nodeName.toLowerCase(),e.className.length>0&&(o+="."+e.className.split(" ").join(" .")))),A.test(o)?(n=t.querySelector(o),n=n?[n]:[]):(n=t.querySelectorAll(o),n=n&&n.length>0?n:[]);const i={length:n.length,objectName:"selector",get:function(e){return n[e]},toArray:function(){return Array.from(n)},each:function(e){i.toArray().forEach(e)}};for(let e=0;e<i.length;e++)i[e]=n[e];return i}const T=function(e,t){-1===e?.className?.indexOf(t)&&(e.className+=" "+t)},M=function(e,t,n){let o,i=document.body;if(t&&m(t)?i=document.getElementById(t):t&&(i=t),!e)return i;if(n&&n.id&&(o=document.getElementById(n.id)),o||(o=document.createElement(e)),!o)return o;if(i.appendChild(o),o&&n){let e;for(e in n)try{o[e]=n[e]}catch(e){}n.className&&T(o,n.className)}return o},C=function(e,t,n){let o,i,r=y(e);if(!(r.length<=0)&&(n||(n=0),!(n>=r.length)&&r[n]))return o=r.get(n),i=new String(o.tagName).toLowerCase(),(t||""===t)&&function(e,t){m(e)||w(Number,"number",e)?b(i)||b(t)||v(t)?t.value=e:t.innerHTML=e:t&&p(e)&&t.appendChild(e)}(t,o),b(i)||b(o)||v(o)?o.value:m(o.innerHTML)?o.innerHTML:void 0},x=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementById(e)},k=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(e)};function P(){const e=this,t=(t,n)=>{let o,i,r=e;return o=c(t),i=d(o),r.moving&&r.dragableCoverMask.id===i.id&&(r.posX=h(),r.posY=u(),r[n].style.left=r.posX-r.offsetX+"px",r[n].style.top=r.posY-r.offsetY+"px"),r},n=()=>{let e;window.getSelection?(e=window.getSelection(),e&&e.empty?e.empty():e&&e.removeAllRanges&&e.removeAllRanges()):document.selection&&document.selection.clear?document.selection.clear():document.selection&&document.selection.empty&&document.selection.empty()},o=(t,n,o)=>{const i=x(n),r=x(o||n);i&&r&&(t?(e.dragableObjects[r.id]=i,a(r,"mousedown",e.mousedown,!1)):(e.dragableObjects[r.id]=null,l(r,"mousedown",e.mousedown,!1)))};return this.dragableObjects=[],this.initialize=()=>{const t=e;t.isInitialized||(t.dragableCoverMask=x("-dragndrop-enabled-x"),t.dragableCoverMask||(t.dragableCoverMask=M("div",document.body),t.dragableCoverMask.id="-dragndrop-enabled-x"),t.dragableCoverMask.style.display="none",a(document,"mousemove",t.mousemove,!1),a(document,"mouseup",t.mouseup,!1),t.isInitialized=!0)},this.findDragableParent=t=>{const n=e;if(t&&t.nodeName&&"body"!==t.nodeName.toLowerCase())return n.dragableObjects[t.id]?t:n.findDragableParent(t.parentNode)},this.mousemove=e=>(t(e,"dragableCoverMask"),n(),!1),this.mouseup=e=>{const o=t(e,"currentDragObject");o.dragableCoverMask.style.display="none",o.currentDragObject=null,o.moving=!1,n()},this.mousedown=function(t){const n=e,o=c(t);let i=d(o);if(i=n.findDragableParent(i),!n.dragableObjects[i.id])return n.moving=!1,!1;n.currentDragObject=n.dragableObjects[i.id],document.body.appendChild(n.currentDragObject),n.posX=h(),n.posY=u(),n.offsetX=n.posX-n.currentDragObject.offsetLeft,n.offsetY=n.posY-n.currentDragObject.offsetTop;let r=n.dragableCoverMask;return r.style.position="absolute",r.style.display="block",r.style.border="2px solid black",r.style.left=n.currentDragObject.offsetLeft+"px",r.style.top=n.currentDragObject.offsetTop+"px",r.style.width=n.currentDragObject.offsetWidth+"px",r.style.height=n.currentDragObject.offsetHeight+"px",r.style.zIndex=1e5,n.moving=!0,!1},this.setDragable=function(e,t){o(!0,e,t)},this.setNONDragable=function(e,t){o(!1,e,t)},this}function S(e,t,n,o,i,r){const s=x(r);s?(this.mainWindow=s,this.titleBar=k(".WebWindowTitle",this.mainWindow)[0],this.titleBar.id="WebWindowTitle"+r,this.windowArea=k(".WebWindowArea",this.mainWindow)[0],this.windowArea.id="WebWindowArea"+r,this.footerArea=k(".WebWindowFooter",this.mainWindow)[0],this.footerArea.id="WebWindowFooter"+r):(this.mainWindow=M("div",document.body,{className:"WebWindowMain",id:r}),this.mainWindow.style.left=t+"px",this.mainWindow.style.top=n+"px",this.mainWindow.style.width=o+"px",this.mainWindow.style.height=i+"px",this.titleBar=M("div",this.mainWindow,{className:"WebWindowTitle",id:"WebWindowTitle"+r}),this.windowArea=M("div",this.mainWindow,{className:"WebWindowArea",id:"WebWindowArea"+r}),this.footerArea=M("div",this.mainWindow,{className:"WebWindowFooter",id:"WebWindowFooter"+r}));M("span",this.titleBar,{className:"WebWindowTitleText"}).innerHTML=e;let a={className:"WebWindowButtonBox"};const l=M("span",this.titleBar,a);a={name:"WW"+r,onsubmit:"return false;"};const c=M("form",l,a);this.maximize=function(){return!1},this.minimize=function(){return!1},this.destroy=function(){return!1};const d=(e,t,n,o,i)=>{const r=M("button",e,{className:"WebWindowButton",name:n,id:n+t});r.innerHTML=o,r.onclick=i;let s=e.innerHTML;s=s.toLowerCase();const a=new RegExp("button class");for(;s.match(a);)s=s.replace(a,'button type="button" class')};d(c,r,"rollup","-",this.minimize),d(c,r,"rolldown","o",this.maximize),d(c,r,"destroy","X",this.destroy),this.windowArea.style.width=o+"px",this.titleBar.style.width=o+"px",this.footerArea.style.width=o+"px";const h=i-this.titleBar.offsetHeight-this.footerArea.offsetHeight;this.windowArea.style.height=h+"px",this.dragndrop=new P}function R(){return Array.from(arguments).reduce(((e,t)=>+e+ +t),0)}function W(e,t){return+e-+t}function D(){return Array.from(arguments).reduce(((e,t)=>+e*+t),1)}function E(e,t){return+e/+t}function N(e){return Math.pow(e,2)}S.prototype.popToFront=function(e){const t=c(e);!function(e,t,n){let o,i,r,s;if(i=y(e),!(i.length<=0)&&(o=i.get(0),n&&n<i.length&&(o=i.get(n)),o))r=function(e,t){let n;e?(n=e.parentNode,n&&(n.nodeName.toLowerCase()!==t?r(n,t):s=n)):s=null},r(o,t)}(d(t),"div.WebWindowMain")},S.prototype.enableDrag=function(){const e=this.popToFront;this.dragndrop.initialize(),this.dragndrop.setDragable(this.mainWindow.id,this.titleBar.id),a(this.mainWindow,"mousedown",e,!1)},S.prototype.disableDrag=function(){const e=this.popToFront;this.dragndrop.initialize(),this.dragndrop.setNONDragable(this.mainWindow.id,this.titleBar.id),l(this.mainWindow,"mousedown",e,!1)},S.prototype.setTitle=function(e){const t=this.titleBar.getElementsByTagName("span");t&&t.length>0&&(t[0].innerHTML=e)},S.prototype.setContent=function(e){C(this.windowArea,e)};function I(e,t,n){const o=O(n),i=D(e,Math.sin(o)),r=D(t,Math.cos(o));return{x:Math.round(i),y:Math.round(r)}}function L(e,t){const n=[];for(let o=0;o<=360;o++){const i=I(e,t,o);n.push(i)}return n}function H(e,t){const n=O(t),o=D(e,Math.sin(n)),i=D(e,Math.cos(n));return{x:Math.round(o),y:Math.round(i)}}function B(e){const t=[];for(let n=0;n<=360;n++){const o=H(e,n);t.push(o)}return t}function O(e){return e*Math.PI/180}function j(e,t,n,o){const i={canvas:null,ctx:null,width:0,height:0};let r;return i.canvas=M("canvas",t,{id:e}),i.canvas?(n&&(i.canvas.width=n),o&&(i.canvas.height=o),i.width=i.canvas.width,i.height=i.canvas.height,null!=i.canvas.getContext&&(i.ctx=i.canvas.getContext("2d"),function(e){const t="black";function n(e,t){return Math.sqrt(N(e)-N(t))}e.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},e.line=function(e,n,o,i,r){let s,a,l,c,d,h=0,u=0;s=this.ctx,r&&(c=r.color,d=r.rotateAngle),s.save(),s.beginPath(),d&&(a=Math.abs(e-o)/2,l=Math.abs(n-i)/2,h=e+a,u=n+l,s.translate(h,u),s.rotate(O(d))),s.moveTo(e-h,n-u),s.lineTo(o-h,i-u),s.fillStyle=c||t,s.fill(),s.strokeStyle=c||t,s.stroke(),s.restore()},e.circle=function(e,n,o,i){let r,s,a,l;s=this.ctx,i&&(a=i.color,l=i.fillStrokeClear),s.beginPath(),s.moveTo(e+o,n),s.arc(e,n,o,0,2*Math.PI,!0),r=l||"stroke",s[r+"Style"]=a||t,s[r]()},e.halfCircle=function(e,n,o,i){let r,s,a,l,c,d,h=0,u=0;s=this.ctx,i&&(a=i.color,l=i.rotateAngle,d=i.openTop,c=i.fillStrokeClear),s.save(),s.beginPath(),l&&(h=e,u=n,s.translate(h,u),s.rotate(O(l))),s.moveTo(e-o-h,n-u),s.arc(e-h,n-u,o,Math.PI,2*Math.PI,!0),d||s.lineTo(e-o-h,n-u),s.closePath(),r=c||"stroke",s[r+"Style"]=a||t,s[r](),s.restore()},e.oval=function(e,n,o,i,r){let s,a,l,c,d,h=0,u=0,g=.5522848,f=e-o/2,w=n-i/2,m=o/2*g,p=i/2*g,v=f+o,b=w+i,A=f+o/2,y=w+i/2;a=this.ctx,a.save(),r&&(l=r.color,c=r.fillStrokeClear,d=r.rotateAngle),a.beginPath(),d&&(h=A,u=y,a.translate(h,u),a.rotate(O(d))),a.moveTo(f-h,y-u),a.bezierCurveTo(f-h,y-p-u,A-m-h,w-u,A-h,w-u),a.bezierCurveTo(A+m-h,w-u,v-h,y-p-u,v-h,y-u),a.bezierCurveTo(v-h,y+p-u,A+m-h,b-u,A-h,b-u),a.bezierCurveTo(A-m-h,b-u,f-h,y+p-u,f-h,y-u),a.restore(),s=c||"stroke",a[s+"Style"]=l||t,a[s]()},e.rectangle=function(e,n,o,i,r){let s,a,l,c,d,h=0,u=0;a=this.ctx,r&&(l=r.color,c=r.rotateAngle,d=r.fillStrokeClear),a.save(),a.beginPath(),c&&(h=Math.round(e+o/2),u=Math.round(n+i/2),a.translate(h,u),a.rotate(O(c))),s=d||"stroke",a[s+"Style"]=l||t,a[s+"Rect"](e-h,n-u,o,i),a[s](),a.restore()},e.square=function(e,t,n,o){this.rectangle(e,t,n,n,o)},e.triangle=function(e,n,o,i,r,s,a){let l,c,d,h,u,g=0,f=0;l=this.ctx,a&&(d=a.color,h=a.rotateAngle,u=a.fillStrokeClear),l.save(),l.beginPath(),h&&(g=(e+o+r)/3,f=(n+i+s)/3,l.translate(g,f),l.rotate(O(h))),c=u||"stroke",l.moveTo(e-g,n-f),l.lineTo(o-g,i-f),l.lineTo(r-g,s-f),l.lineTo(e-g,n-f),l.closePath(),l[c+"Style"]=d||t,l[c](),l.restore()},e.equilateralTriangle=function(e,t,o,i){let r,s,a;i&&(a=i.orientation),s=o/2,r=n(o,s),"down"===a?this.triangle(e,t,e+o,t,e+s,t+r,i):this.triangle(e,t,e+o,t,e+s,t-r,i)},e.hexagon=function(e,o,i,r){let s,a,l,c,d,h,u,g=0,f=0;s=this.ctx,r&&(h=r.color,u=r.rotateAngle,d=r.fillStrokeClear),l=i/2,c=d||"stroke",a=n(i,l),s.save(),s.beginPath(),u&&(g=e,f=o,s.translate(g,f),s.rotate(O(u))),s.moveTo(e+l-i-g,o-a-f),s.lineTo(e+l-g,o-a-f),s.lineTo(e+i-g,o-f),s.lineTo(e+l-g,o+a-f),s.lineTo(e+l-i-g,o+a-f),s.lineTo(e-i-g,o-f),s.lineTo(e-i+l-g,o-a-f),s.closePath(),s[c+"Style"]=h||t,s[c](),s.restore()},e.octagon=function(e,n,o,i){let r,s,a,l,c,d,h,u=0,g=0;i&&(d=i.color,h=i.rotateAngle,c=i.fillStrokeClear),l=c||"stroke",a=o/2,s=Math.sqrt(Math.pow(o,2)+Math.pow(a,2)),r=this.ctx,r.save(),h&&(u=e,g=n,r.translate(u,g),r.rotate(O(h))),r.beginPath(),r.moveTo(e-a-u,n-s-g),r.lineTo(e+a-u,n-s-g),r.lineTo(e+s-u,n-a-g),r.lineTo(e+s-u,n+a-g),r.lineTo(e+a-u,n+s-g),r.lineTo(e-a-u,n+s-g),r.lineTo(e-s-u,n+a-g),r.lineTo(e-s-u,n-a-g),r.lineTo(e-a-u,n-s-g),r.closePath(),r[l+"Style"]=d||t,r[l](),r.restore()},e.setBackgroundColor=function(e){this.rectangle(0,0,this.width,this.height,{color:e||"white",fillStrokeClear:"fill"})},e.addtext=function(e,n,o){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.ctx.font=i.font||"16pt Calibri",this.ctx.fillStyle=i.color||t,this.ctx.fillText(o,e,n)}}(i),r=i),r):null}const F=2.496532,$=89.2641667,z=21.0786056,U=-77.4311111;const X=new class{hoursMinutesSeconds(e){let t=Math.floor(e);t=t<0?R(24,t):t,t=t>24?t%24:t;const n=this.pad(Math.floor(D(60,this.getFraction(e))));return`${t}:${n}:${this.pad(Math.round(D(60,W(D(60,this.getFraction(e)),n))))}`}hourAngleToDegrees(e,t,n){return R(e,E(t,60),E(n,3600))}mapTo24Hour(e){let t=e;return t<0?t=W(t,D(24,W(E(t,24),1))):e>=24&&(t=W(t,D(E(t,24),24))),t}pad(e){return`${e}`.padStart(2,"0")}getFraction(e){const t=W(e,Math.floor(e));return t<0?R(t,1):t}};const Y=new class{toUTC(e){return{year:e.getUTCFullYear(),month:e.getUTCMonth(),date:e.getUTCDate(),hours:e.getUTCHours(),minutes:e.getUTCMinutes(),seconds:e.getUTCSeconds()}}toJulien(e){const t=e.date;let n=R(e.month,1),o=e.year,i=R(e.hours,E(e.minutes,60),E(e.seconds,3600));n<=2&&(n=R(n,12),o=W(o,1));Math.floor(E(o,100));const r=Math.floor(D(365.25,R(o,4716))),s=Math.floor(D(30.6001,R(n,1)));return R(W(W(R(r,s,t),13),1524.5),E(i,24))}toGMST(e){const t=W(e,2400000.5),n=Math.floor(t),o=E(W(n,51544.5),36525),i=D(W(.093104,D(62e-7,o)),o),r=D(R(8640184.812866,i),E(o,3600));return R(6.697374558,D(24,W(t,n),1.0027379093),r)}gmstToLST(e,t){return D(24,X.getFraction(E(R(e,E(t,15)),24)))}isDST(e){const t=new Date(e.getFullYear(),0,1).getTimezoneOffset(),n=new Date(e.getFullYear(),6,1).getTimezoneOffset();return Math.max(t,n)!==e.getTimezoneOffset()}utcToLST(e,t){const n=this.toJulien(e),o=this.toGMST(n);return this.gmstToLST(o,t)}calculateLST(e,t){const n=W(R(E(e.getTime(),864e5),2440587.5),2451545),o=R(e.getUTCHours(),E(e.getUTCMinutes(),60),E(e.getUTCSeconds(),3600)),i=R(6.697374558,D(.06570982441908,n),D(1.00273790935,o));return D(24,X.getFraction(E(R(i,E(t,15)),24)))}};const q=new class{precessionCorrection(e,t){let n=Y.toJulien(e),o=F,i=$;t<0&&(o=z,i=U);let r=E(D(o,Math.PI),12),s=E(D(i,Math.PI),180);if(t<0)this.correctedRA=R(o,E(D(R(3.075,D(1.336,Math.sin(D(15,o)),57.08839)),W(e.year,2e3)),3600)),this.correctedDEC=R(i,E(D(20.04,Math.cos(D(15,i)),W(e.year,2e3)),3600));else{const e=E(W(n,2451545),36525);let t=R(D(2306.2181,e),D(.30188,e,e),D(.017998,e,e,e)),o=R(D(2306.2181,e),D(1.09468,e,e),D(.018203,e,e,e)),i=R(D(2004.3109,e),D(-.42665,e,e),D(-.041833,e,e,e));t=E(D(t,Math.PI),648e3),o=E(D(o,Math.PI),648e3),i=E(D(i,Math.PI),648e3);const a=D(Math.sin(R(r,t)),Math.cos(s)),l=W(D(Math.cos(R(r,t)),Math.cos(i),Math.cos(s)),D(Math.sin(i),Math.sin(s))),c=R(D(Math.cos(R(r,t)),Math.sin(i),Math.cos(s)),D(Math.cos(i),Math.sin(s))),d=R(Math.sqrt(D(a,a),D(l,l)));this.correctedDEC=c>.9?Math.acos(d):c<-.9?-Math.acos(d):Math.asin(c),this.correctedRA=R(Math.atan2(a,l),o),this.correctedRA=E(D(12,this.correctedRA),Math.PI),this.correctedDEC=E(D(180,this.correctedDEC),Math.PI),this.correctedDEC>90&&(this.correctedDEC=W(180,this.correctedDEC),this.correctedRA=R(this.correctedRA,12)),this.correctedDEC<-90&&(this.correctedDEC=W(-180,this.correctedDEC),this.correctedRA=R(this.correctedRA,12)),this.correctedRA=X.mapTo24Hour(this.correctedRA)}}getPolarisHA(e,t,n){const o=Y.toUTC(e);this.precessionCorrection(o,t);let i=W(Y.utcToLST(o,n),this.correctedRA);return t<0&&(i=i<0?Math.abs(i):-i),{ha:i}}getPolarisHourAngle(e,t,n,o){const i=Y.toUTC(e);this.precessionCorrection(i,t);const r=Y.calculateLST(e,n);let s=Number(W(r,o)).toFixed(6),a=Number(W(r,this.correctedRA)).toFixed(6);return s<0&&(s=R(24,s)),a<0&&(a=R(24,a)),{hourAnglePolaris:s,plusHourAnglePolaris:a}}haToDegrees(e){return E(D(360,e),24)}};class V{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.color=e.color||"red",this.radius=e.radius||5,this.hiddenRadius=R(this.radius,1),this.direction=e.direction&&"clockwise"===e.direction?R:W,this.angle=e.startAngle||0,this.speed=e.speed||1}setupPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=arguments.length>1?arguments[1]:void 0;this.points=e!==t&&t?L(e,t):B(e)}increment(){this.angle=this.direction(this.angle,this.speed),this.angle<0?this.angle=360:this.angle>360&&(this.angle=0)}getCurrentPosition(e,t){return{x:this.direction(e.x,this.points[this.angle].x),y:this.direction(e.y,this.points[this.angle].y),radius:t?this.radius:this.hiddenRadius,color:t?this.color:"black"}}getHiddenPosition(e){return this.getCurrentPosition(e,!1)}getVisablePosition(e){return this.getCurrentPosition(e,!0)}}class J extends V{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),e.xRadius&&this.setupPoints(e.xRadius,e.yRadius),e.isFixedCenter&&e.centerPoints&&(this.centerPts=e.centerPoints)}getInitialPosition(e){const t=this.centerPts?this.centerPts:e;return this.getVisablePosition(t)}getNextPosition(e){const t=this.centerPts?this.centerPts:e;return this.hidden=this.getHiddenPosition(t),this.increment(),this.visable=this.getVisablePosition(t),{hidden:this.hidden,visable:this.visable}}getPoint(){return{hidden:{x:this.hidden.x,y:this.hidden.y},visable:{x:this.visable.x,y:this.visable.y}}}}const G=(e,t,n,o)=>{const{hourAnglePolaris:i,plusHourAnglePolaris:r}=q.getPolarisHourAngle(e,t,n,o);return{hourAnglePolaris:Math.floor(D(i,15)),plusHourAnglePolaris:Math.floor(D(r,15))}};class K extends J{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.speed=0,this.latitude=e.latitude,this.longitude=e.longitude,this.rightAssention=e.rightAssention,this.useInputRA=e.useInputRA,this.clockTime=e.clockTime||new Date;const{hourAnglePolaris:t,plusHourAnglePolaris:n}=G(this.clockTime,this.latitude,this.longitude,this.rightAssention);this.hourAngle=n,this.userDefinedHourAngle=t,this.realAngle=this.useInputRA?this.userDefinedHourAngle:this.hourAngle,this.angle=this.realAngle,this.clockType=12===e.clockType?12:24,this.direction=R}setupPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;this.points=B(e)}increment(){this.clockTime=new Date;const{hourAnglePolaris:e,plusHourAnglePolaris:t}=G(this.clockTime,this.latitude,this.longitude,this.rightAssention);this.hourAngle=t,this.userDefinedHourAngle=e,this.realAngle=this.useInputRA?this.userDefinedHourAngle:this.hourAngle,this.angle=this.realAngle,12===this.clockType&&(this.realAngle<=180?this.angle=W(180,this.realAngle):this.angle=W(360,W(this.realAngle,180))),this.angle<0?this.angle=360:this.angle>360&&(this.angle=0)}}const Q="2:29:48",Z="89:27:48";let _,ee;function te(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["12/6","0/0","18/9","6/3"];window.canvasRef.circle(e,t,n,{color:"red"}),window.canvasRef.line(e,t-n,e,t+n,{color:"red"}),window.canvasRef.line(e-n,t,e+n,t,{color:"red"});for(let o=0;o<360;o+=15)window.canvasRef.line(e-n,t,e+n,t,{rotateAngle:o,color:"red"});window.canvasRef.circle(e,t,n-20,{color:"black",fillStrokeClear:"fill"}),window.canvasRef.line(e,t-n,e,t+n,{color:"red"}),window.canvasRef.line(e-n,t,e+n,t,{color:"red"});const i=10*o[0].length/2,r=10*o[1].length/2,s=10*o[2].length+5;window.canvasRef.addtext(e-i,t-n-10,o[0],{color:"red"}),window.canvasRef.addtext(e-r,t+n+20,o[1],{color:"red"}),window.canvasRef.addtext(e-n-s,t,o[2],{color:"red"}),window.canvasRef.addtext(e+n+10,t,o[3],{color:"red"})}function ne(){const e=document.getElementById("latitude").value||37.6904826,t=document.getElementById("longitude").value||-122.47267,n=document.getElementById("polarisRAHour").value,o=document.getElementById("polarisRAMinute").value,i=document.getElementById("polarisRASecond").value,r=document.getElementById("polarisDecHour").value,s=document.getElementById("polarisDecMinute").value,a=document.getElementById("polarisDecSecond").value,l=Q.split(":"),c=Z.split(":"),d=n&&!isNaN(parseInt(n))?n:l[0],h=o&&!isNaN(parseInt(o))?o:l[1],u=i&&!isNaN(parseInt(i))?i:l[2],g=r&&!isNaN(parseInt(r))?r:c[0],f=s&&!isNaN(parseInt(s))?s:c[1],w=a&&!isNaN(parseInt(a))?a:c[2],m=X.hourAngleToDegrees(g,f,w),p=X.hourAngleToDegrees(d,h,u),v=+d==+l[0]&&+h==+l[1]&&+u==+l[2];window.canvasRef.rectangle(40,20,700,300,{color:"black",fillStrokeClear:"fill"});const b=new Date;te(200,180,150),te(550,180,100,["0","6","9","3"]);let A,y=0;const T={x:550,y:180},M={x:200,y:180};_||(_=new K({color:"#fff",radius:6,clockType:12,isFixedCenter:!0,clockTime:b,centerPoints:T,xRadius:75,yRadius:75,startAngle:0,latitude:e,longitude:t,rightAssention:p})),ee||(ee=new K({color:"#fff",radius:6,clockType:24,isFixedCenter:!0,clockTime:b,centerPoints:M,xRadius:120,yRadius:120,startAngle:0,latitude:e,longitude:t,rightAssention:p})),_&&(_.latitude=e,_.longitude=t,_.rightAssention=p,y=_.getNextPosition(T).visable,window.canvasRef.circle(y.x,y.y,y.radius,{color:y.color,fillStrokeClear:"fill"})),ee&&(ee.latitude=e,ee.longitude=t,ee.rightAssention=p,A=ee.getNextPosition(M).visable,window.canvasRef.circle(A.x,A.y,A.radius,{color:A.color,fillStrokeClear:"fill"}));const C=ee?ee.userDefinedHourAngle:0,x=ee?ee.hourAngle:0,k=X.hoursMinutesSeconds(C),P=X.hoursMinutesSeconds(x),{ha:S}=q.getPolarisHA(b,e,t,t),R=X.hoursMinutesSeconds(S);window.polarSPref=_,window.canvasRef.rectangle(50,390,800,500,{color:"black",fillStrokeClear:"fill"}),window.canvasRef.rectangle(50,410,800,500,{color:"black",fillStrokeClear:"fill"}),window.canvasRef.rectangle(50,430,800,500,{color:"black",fillStrokeClear:"fill"}),window.canvasRef.rectangle(50,450,800,500,{color:"black",fillStrokeClear:"fill"});const W=e=>Number(e).toFixed(6);v?(window.canvasRef.addtext(50,410,`Using corrected RA, Dec values: ${X.hoursMinutesSeconds(q.correctedRA)} / ${X.hoursMinutesSeconds(q.correctedDEC)}`,{color:"red"}),window.canvasRef.addtext(50,430,`Polaris hour angle: ${W(x)} alt calculation: ${W(S)} `,{color:"red"}),window.canvasRef.addtext(50,450,`Clock time: ${P} or ${R} `,{color:"red"})):(window.canvasRef.addtext(50,410,`Using User Defined RA, Dec: ${X.hoursMinutesSeconds(p)} / ${X.hoursMinutesSeconds(m)}`,{color:"red"}),window.canvasRef.addtext(50,430,`Polaris hour angle: ${W(x)} alt calculation: ${W(S)} `,{color:"red"}),window.canvasRef.addtext(50,450,`Clock time: ${k} ${R} `,{color:"red"})),window.canvasRef.addtext(50,470,`Polaris position time: ${_.angle}  ${ee.angle}`,{color:"red"})}var oe;oe=function(){const e=document.getElementById("main-window"),t=window.getComputedStyle(e),n=(new S("Polaris Hour Angle",t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight,"main-window"),j("polaris-hour","canvas-container",800,500));window.canvasRef=n,ne(),window.setInterval(ne,5e3)},s.onLoadEventStack.push(oe)})();