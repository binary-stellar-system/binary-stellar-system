(()=>{"use strict";const t=window.navigator,e=t.userAgent.replace(/\(|\)/g,"").split(" ").filter((t=>{const e=t.toLowerCase();return e.indexOf("/")>-1&&!e.startsWith("gecko")&&!e.startsWith("safari")&&!e.startsWith("applewebkit")&&!e.startsWith("mozilla")})),o=e[e.length-1],n=parseFloat(o.split("/")[1]),i=o.split("/")[0],r="version"===i.toLowerCase()?"Safari":i,s={capabilitiesDetected:!1,hasJscript:!1,hasActiveX:!1,isDOMCapable:!1,isAJAXCapable:!1,hasCookiesEnabled:t.cookieEnabled,name:r,uaName:r,OS:t.platform,uaOS:t.platform,userAgent:t.userAgent,appVersion:n,uaAppVersion:n,version:n,uaOSVersion:"",onLoadEventStack:[],onDOMReadyEventStack:[],touchEnabled:!1,includeStack:[],scriptLoadStack:[],scriptLocation:""},a=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(window.attachEvent&&!window.addEventListener){const n=t.attachEvent("on"+e,o);if(!n)throw"Event "+e+" could not be added!";return n}return t.addEventListener(e,o,n)},l=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(window.detachEvent&&!window.removeEventListener){const n=t.detachEvent("on"+e,o);if(!n)throw"Event "+e+" could not be removed!";return n}return t.removeEventListener(e,o,n)},c=t=>window.event?window.event:t,d=t=>{const e=c(t);let o;return e.srcElement?o=e.srcElement:e.target&&(o=e.target),o},h=t=>{const e=c(t);let o=0;return e.pageX?o=e.pageX:e.clientX&&(o=e.clientX),o},u=t=>{const e=c(t);let o=0;return e.pageY?o=e.pageY:e.clientY&&(o=e.clientY),o};let g,f;document.createEvent&&(g=(t,e,o)=>{let n=document.createEvent("Event");if(n)return o||(o={}),o.canBubble||(o.canBubble=!0),o.cancellable||(o.cancellable=!0),n.initEvent("Event",o.canBubble,o.cancellable),n},f=function(t){document.dispatchEvent(t)});function w(t,e,o){return o instanceof t||(typeof o).toLowerCase()===e}function m(t){return w(String,"string",t)}function p(t){return w(Object,"object",t)}function v(t){let e=t.nodeName;return e=e||"","textarea"===e.toLowerCase()}function b(t){let e=typeof t,o=t.nodeName;return o=o||"","input"===o.toLowerCase()||"input"===e.toLowerCase()&&void 0!==e.type}a(window,"load",(function(){let t,e,o=s.onLoadEventStack;t=o.length;for(let n=0;n<t;n+=1)e=o[n],e&&"function"===(typeof e).toLowerCase()&&e()}),!1);const y=/^#(?:([\w-]+)|(\w+)|\.([\w-]+))$/;function T(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(!m(t)&&p(t)&&t.hasOwnProperty("objectName")&&"selector"===t.objectName)return t;let o,n=t;t instanceof HTMLElement&&(t.id?n="#"+t.id:(n=t.nodeName.toLowerCase(),t.className.length>0&&(n+="."+t.className.split(" ").join(" .")))),y.test(n)?(o=e.querySelector(n),o=o?[o]:[]):(o=e.querySelectorAll(n),o=o&&o.length>0?o:[]);const i={length:o.length,objectName:"selector",get:function(t){return o[t]},toArray:function(){return Array.from(o)},each:function(t){i.toArray().forEach(t)}};for(let t=0;t<i.length;t++)i[t]=o[t];return i}const M=function(t,e){-1===t?.className?.indexOf(e)&&(t.className+=" "+e)},A=function(t,e,o){let n,i=document.body;if(e&&m(e)?i=document.getElementById(e):e&&(i=e),!t)return i;if(o&&o.id&&(n=document.getElementById(o.id)),n||(n=document.createElement(t)),!n)return n;if(i.appendChild(n),n&&o){let t;for(t in o)try{n[t]=o[t]}catch(t){}o.className&&M(n,o.className)}return n},C=function(t,e,o){let n,i,r=T(t);if(!(r.length<=0)&&(o||(o=0),!(o>=r.length)&&r[o]))return n=r.get(o),i=new String(n.tagName).toLowerCase(),(e||""===e)&&function(t,e){m(t)||w(Number,"number",t)?b(i)||b(e)||v(e)?e.value=t:e.innerHTML=t:e&&p(t)&&e.appendChild(t)}(e,n),b(i)||b(n)||v(n)?n.value:m(n.innerHTML)?n.innerHTML:void 0},x=function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).getElementById(t)},k=function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(t)};function P(){const t=this,e=(e,o)=>{let n,i,r=t;return n=c(e),i=d(n),r.moving&&r.dragableCoverMask.id===i.id&&(r.posX=h(),r.posY=u(),r[o].style.left=r.posX-r.offsetX+"px",r[o].style.top=r.posY-r.offsetY+"px"),r},o=()=>{let t;window.getSelection?(t=window.getSelection(),t&&t.empty?t.empty():t&&t.removeAllRanges&&t.removeAllRanges()):document.selection&&document.selection.clear?document.selection.clear():document.selection&&document.selection.empty&&document.selection.empty()},n=(e,o,n)=>{const i=x(o),r=x(n||o);i&&r&&(e?(t.dragableObjects[r.id]=i,a(r,"mousedown",t.mousedown,!1)):(t.dragableObjects[r.id]=null,l(r,"mousedown",t.mousedown,!1)))};return this.dragableObjects=[],this.initialize=()=>{const e=t;e.isInitialized||(e.dragableCoverMask=x("-dragndrop-enabled-x"),e.dragableCoverMask||(e.dragableCoverMask=A("div",document.body),e.dragableCoverMask.id="-dragndrop-enabled-x"),e.dragableCoverMask.style.display="none",a(document,"mousemove",e.mousemove,!1),a(document,"mouseup",e.mouseup,!1),e.isInitialized=!0)},this.findDragableParent=e=>{const o=t;if(e&&e.nodeName&&"body"!==e.nodeName.toLowerCase())return o.dragableObjects[e.id]?e:o.findDragableParent(e.parentNode)},this.mousemove=t=>(e(t,"dragableCoverMask"),o(),!1),this.mouseup=t=>{const n=e(t,"currentDragObject");n.dragableCoverMask.style.display="none",n.currentDragObject=null,n.moving=!1,o()},this.mousedown=function(e){const o=t,n=c(e);let i=d(n);if(i=o.findDragableParent(i),!o.dragableObjects[i.id])return o.moving=!1,!1;o.currentDragObject=o.dragableObjects[i.id],document.body.appendChild(o.currentDragObject),o.posX=h(),o.posY=u(),o.offsetX=o.posX-o.currentDragObject.offsetLeft,o.offsetY=o.posY-o.currentDragObject.offsetTop;let r=o.dragableCoverMask;return r.style.position="absolute",r.style.display="block",r.style.border="2px solid black",r.style.left=o.currentDragObject.offsetLeft+"px",r.style.top=o.currentDragObject.offsetTop+"px",r.style.width=o.currentDragObject.offsetWidth+"px",r.style.height=o.currentDragObject.offsetHeight+"px",r.style.zIndex=1e5,o.moving=!0,!1},this.setDragable=function(t,e){n(!0,t,e)},this.setNONDragable=function(t,e){n(!1,t,e)},this}function S(t,e,o,n,i,r){const s=x(r);s?(this.mainWindow=s,this.titleBar=k(".WebWindowTitle",this.mainWindow)[0],this.titleBar.id="WebWindowTitle"+r,this.windowArea=k(".WebWindowArea",this.mainWindow)[0],this.windowArea.id="WebWindowArea"+r,this.footerArea=k(".WebWindowFooter",this.mainWindow)[0],this.footerArea.id="WebWindowFooter"+r):(this.mainWindow=A("div",document.body,{className:"WebWindowMain",id:r}),this.mainWindow.style.left=e+"px",this.mainWindow.style.top=o+"px",this.mainWindow.style.width=n+"px",this.mainWindow.style.height=i+"px",this.titleBar=A("div",this.mainWindow,{className:"WebWindowTitle",id:"WebWindowTitle"+r}),this.windowArea=A("div",this.mainWindow,{className:"WebWindowArea",id:"WebWindowArea"+r}),this.footerArea=A("div",this.mainWindow,{className:"WebWindowFooter",id:"WebWindowFooter"+r}));A("span",this.titleBar,{className:"WebWindowTitleText"}).innerHTML=t;let a={className:"WebWindowButtonBox"};const l=A("span",this.titleBar,a);a={name:"WW"+r,onsubmit:"return false;"};const c=A("form",l,a);this.maximize=function(){return!1},this.minimize=function(){return!1},this.destroy=function(){return!1};const d=(t,e,o,n,i)=>{const r=A("button",t,{className:"WebWindowButton",name:o,id:o+e});r.innerHTML=n,r.onclick=i;let s=t.innerHTML;s=s.toLowerCase();const a=new RegExp("button class");for(;s.match(a);)s=s.replace(a,'button type="button" class')};d(c,r,"rollup","-",this.minimize),d(c,r,"rolldown","o",this.maximize),d(c,r,"destroy","X",this.destroy),this.windowArea.style.width=n+"px",this.titleBar.style.width=n+"px",this.footerArea.style.width=n+"px";const h=i-this.titleBar.offsetHeight-this.footerArea.offsetHeight;this.windowArea.style.height=h+"px",this.dragndrop=new P}function W(){return Array.from(arguments).reduce(((t,e)=>+t+ +e),0)}function R(t,e){return+t-+e}function E(){return Array.from(arguments).reduce(((t,e)=>+t*+e),1)}function D(t,e){return+t/+e}function N(t){return Math.pow(t,2)}S.prototype.popToFront=function(t){const e=c(t);!function(t,e,o){let n,i,r,s;if(i=T(t),!(i.length<=0)&&(n=i.get(0),o&&o<i.length&&(n=i.get(o)),n))r=function(t,e){let o;t?(o=t.parentNode,o&&(o.nodeName.toLowerCase()!==e?r(o,e):s=o)):s=null},r(n,e)}(d(e),"div.WebWindowMain")},S.prototype.enableDrag=function(){const t=this.popToFront;this.dragndrop.initialize(),this.dragndrop.setDragable(this.mainWindow.id,this.titleBar.id),a(this.mainWindow,"mousedown",t,!1)},S.prototype.disableDrag=function(){const t=this.popToFront;this.dragndrop.initialize(),this.dragndrop.setNONDragable(this.mainWindow.id,this.titleBar.id),l(this.mainWindow,"mousedown",t,!1)},S.prototype.setTitle=function(t){const e=this.titleBar.getElementsByTagName("span");e&&e.length>0&&(e[0].innerHTML=t)},S.prototype.setContent=function(t){C(this.windowArea,t)};function L(t,e,o){const n=I(o),i=E(t,Math.cos(n)),r=E(e,Math.sin(n));return{x:Math.round(i),y:Math.round(r)}}function H(t,e){const o=[];for(let n=0;n<=360;n++){const i=L(t,e,n);o.push(i)}return o}function O(t,e){const o=I(e),n=E(t,Math.cos(o)),i=E(t,Math.sin(o));return{x:Math.round(n),y:Math.round(i)}}function B(t){const e=[];for(let o=0;o<=360;o++){const n=O(t,o);e.push(n)}return e}function I(t){return t*Math.PI/180}function F(t,e,o,n){const i={canvas:null,ctx:null,width:0,height:0};let r;return i.canvas=A("canvas",e,{id:t}),i.canvas?(o&&(i.canvas.width=o),n&&(i.canvas.height=n),i.width=i.canvas.width,i.height=i.canvas.height,null!=i.canvas.getContext&&(i.ctx=i.canvas.getContext("2d"),function(t){const e="black";function o(t,e){return Math.sqrt(N(t)-N(e))}t.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},t.line=function(t,o,n,i,r){let s,a,l,c,d,h=0,u=0;s=this.ctx,r&&(c=r.color,d=r.rotateAngle),s.save(),s.beginPath(),d&&(a=Math.abs(t-n)/2,l=Math.abs(o-i)/2,h=t+a,u=o+l,s.translate(h,u),s.rotate(I(d))),s.moveTo(t-h,o-u),s.lineTo(n-h,i-u),s.fillStyle=c||e,s.fill(),s.strokeStyle=c||e,s.stroke(),s.restore()},t.circle=function(t,o,n,i){let r,s,a,l;s=this.ctx,i&&(a=i.color,l=i.fillStrokeClear),s.beginPath(),s.moveTo(t+n,o),s.arc(t,o,n,0,2*Math.PI,!0),r=l||"stroke",s[r+"Style"]=a||e,s[r]()},t.halfCircle=function(t,o,n,i){let r,s,a,l,c,d,h=0,u=0;s=this.ctx,i&&(a=i.color,l=i.rotateAngle,d=i.openTop,c=i.fillStrokeClear),s.save(),s.beginPath(),l&&(h=t,u=o,s.translate(h,u),s.rotate(I(l))),s.moveTo(t-n-h,o-u),s.arc(t-h,o-u,n,Math.PI,2*Math.PI,!0),d||s.lineTo(t-n-h,o-u),s.closePath(),r=c||"stroke",s[r+"Style"]=a||e,s[r](),s.restore()},t.oval=function(t,o,n,i,r){let s,a,l,c,d,h=0,u=0,g=.5522848,f=t-n/2,w=o-i/2,m=n/2*g,p=i/2*g,v=f+n,b=w+i,y=f+n/2,T=w+i/2;a=this.ctx,a.save(),r&&(l=r.color,c=r.fillStrokeClear,d=r.rotateAngle),a.beginPath(),d&&(h=y,u=T,a.translate(h,u),a.rotate(I(d))),a.moveTo(f-h,T-u),a.bezierCurveTo(f-h,T-p-u,y-m-h,w-u,y-h,w-u),a.bezierCurveTo(y+m-h,w-u,v-h,T-p-u,v-h,T-u),a.bezierCurveTo(v-h,T+p-u,y+m-h,b-u,y-h,b-u),a.bezierCurveTo(y-m-h,b-u,f-h,T+p-u,f-h,T-u),a.restore(),s=c||"stroke",a[s+"Style"]=l||e,a[s]()},t.rectangle=function(t,o,n,i,r){let s,a,l,c,d,h=0,u=0;a=this.ctx,r&&(l=r.color,c=r.rotateAngle,d=r.fillStrokeClear),a.save(),a.beginPath(),c&&(h=Math.round(t+n/2),u=Math.round(o+i/2),a.translate(h,u),a.rotate(I(c))),s=d||"stroke",a[s+"Style"]=l||e,a[s+"Rect"](t-h,o-u,n,i),a[s](),a.restore()},t.square=function(t,e,o,n){this.rectangle(t,e,o,o,n)},t.triangle=function(t,o,n,i,r,s,a){let l,c,d,h,u,g=0,f=0;l=this.ctx,a&&(d=a.color,h=a.rotateAngle,u=a.fillStrokeClear),l.save(),l.beginPath(),h&&(g=(t+n+r)/3,f=(o+i+s)/3,l.translate(g,f),l.rotate(I(h))),c=u||"stroke",l.moveTo(t-g,o-f),l.lineTo(n-g,i-f),l.lineTo(r-g,s-f),l.lineTo(t-g,o-f),l.closePath(),l[c+"Style"]=d||e,l[c](),l.restore()},t.equilateralTriangle=function(t,e,n,i){let r,s,a;i&&(a=i.orientation),s=n/2,r=o(n,s),"down"===a?this.triangle(t,e,t+n,e,t+s,e+r,i):this.triangle(t,e,t+n,e,t+s,e-r,i)},t.hexagon=function(t,n,i,r){let s,a,l,c,d,h,u,g=0,f=0;s=this.ctx,r&&(h=r.color,u=r.rotateAngle,d=r.fillStrokeClear),l=i/2,c=d||"stroke",a=o(i,l),s.save(),s.beginPath(),u&&(g=t,f=n,s.translate(g,f),s.rotate(I(u))),s.moveTo(t+l-i-g,n-a-f),s.lineTo(t+l-g,n-a-f),s.lineTo(t+i-g,n-f),s.lineTo(t+l-g,n+a-f),s.lineTo(t+l-i-g,n+a-f),s.lineTo(t-i-g,n-f),s.lineTo(t-i+l-g,n-a-f),s.closePath(),s[c+"Style"]=h||e,s[c](),s.restore()},t.octagon=function(t,o,n,i){let r,s,a,l,c,d,h,u=0,g=0;i&&(d=i.color,h=i.rotateAngle,c=i.fillStrokeClear),l=c||"stroke",a=n/2,s=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),r=this.ctx,r.save(),h&&(u=t,g=o,r.translate(u,g),r.rotate(I(h))),r.beginPath(),r.moveTo(t-a-u,o-s-g),r.lineTo(t+a-u,o-s-g),r.lineTo(t+s-u,o-a-g),r.lineTo(t+s-u,o+a-g),r.lineTo(t+a-u,o+s-g),r.lineTo(t-a-u,o+s-g),r.lineTo(t-s-u,o+a-g),r.lineTo(t-s-u,o-a-g),r.lineTo(t-a-u,o-s-g),r.closePath(),r[l+"Style"]=d||e,r[l](),r.restore()},t.setBackgroundColor=function(t){this.rectangle(0,0,this.width,this.height,{color:t||"white",fillStrokeClear:"fill"})},t.addtext=function(t,o,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.ctx.font=i.font||"16pt Calibri",this.ctx.fillStyle=i.color||e,this.ctx.fillText(n,t,o)}}(i),r=i),r):null}const j=2.496532,z=89.2641667,$=21.0786056,U=-77.4311111;const X=new class{hoursMinutesSeconds(t){let e=Math.floor(t);e=e<0?W(24,e):e;const o=this.pad(Math.floor(E(60,this.getFraction(t))));return`${e}:${o}:${this.pad(Math.round(E(60,R(E(60,this.getFraction(t)),o))))}`}hourAngleToDegrees(t,e,o){return W(t,D(e,60),D(o,3600))}mapTo24Hour(t){let e=t;return e<0?e=R(e,E(24,R(D(e,24),1))):t>=24&&(e=R(e,E(D(e,24),24))),e}pad(t){return`${t}`.padStart(2,"0")}getFraction(t){const e=R(t,Math.floor(t));return e<0?W(e,1):e}};const Y=new class{toUTC(t){return{year:t.getUTCFullYear(),month:t.getUTCMonth(),date:t.getUTCDate(),hours:t.getUTCHours(),minutes:t.getUTCMinutes(),seconds:t.getUTCSeconds()}}toJulien(t){const e=t.date;let o=W(t.month,1),n=t.year,i=W(t.hours,D(t.minutes,60),D(t.seconds,3600));o<=2&&(o=W(o,12),n=R(n,1));Math.floor(D(n,100));const r=Math.floor(E(365.25,W(n,4716))),s=Math.floor(E(30.6001,W(o,1)));return W(R(R(W(r,s,e),13),1524.5),D(i,24))}toGMST(t){const e=R(t,2400000.5),o=Math.floor(e),n=D(R(o,51544.5),36525),i=E(R(.093104,E(62e-7,n)),n),r=E(W(8640184.812866,i),D(n,3600));return W(6.697374558,E(24,R(e,o),1.0027379093),r)}gmstToLST(t,e){return E(24,X.getFraction(D(W(t,D(e,15)),24)))}isDST(t){const e=new Date(t.getFullYear(),0,1).getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();return Math.max(e,o)!==t.getTimezoneOffset()}utcToLST(t,e){const o=this.toJulien(t),n=this.toGMST(o);return this.gmstToLST(n,e)}calculateLST(t,e){const o=R(W(D(t.getTime(),864e5),2440587.5),2451545),n=W(t.getUTCHours(),D(t.getUTCMinutes(),60),D(t.getUTCSeconds(),3600)),i=W(6.697374558,E(.06570982441908,o),E(1.00273790935,n));return E(24,X.getFraction(D(W(i,D(e,15)),24)))}};const q=new class{precessionCorrection(t,e){let o=Y.toJulien(t),n=j,i=z;e<0&&(n=$,i=U);let r=D(E(n,Math.PI),12),s=D(E(i,Math.PI),180);if(e<0)this.correctedRA=W(n,D(E(W(3.075,E(1.336,Math.sin(E(15,n)),57.08839)),R(t.year,2e3)),3600)),this.correctedDEC=W(i,D(E(20.04,Math.cos(E(15,i)),R(t.year,2e3)),3600));else{const t=D(R(o,2451545),36525);let e=W(E(2306.2181,t),E(.30188,t,t),E(.017998,t,t,t)),n=W(E(2306.2181,t),E(1.09468,t,t),E(.018203,t,t,t)),i=W(E(2004.3109,t),E(-.42665,t,t),E(-.041833,t,t,t));e=D(E(e,Math.PI),648e3),n=D(E(n,Math.PI),648e3),i=D(E(i,Math.PI),648e3);const a=E(Math.sin(W(r,e)),Math.cos(s)),l=R(E(Math.cos(W(r,e)),Math.cos(i),Math.cos(s)),E(Math.sin(i),Math.sin(s))),c=W(E(Math.cos(W(r,e)),Math.sin(i),Math.cos(s)),E(Math.cos(i),Math.sin(s))),d=W(Math.sqrt(E(a,a),E(l,l)));this.correctedDEC=c>.9?Math.acos(d):c<-.9?-Math.acos(d):Math.asin(c),this.correctedRA=W(Math.atan2(a,l),n),this.correctedRA=D(E(12,this.correctedRA),Math.PI),this.correctedDEC=D(E(180,this.correctedDEC),Math.PI),this.correctedDEC>90&&(this.correctedDEC=R(180,this.correctedDEC),this.correctedRA=W(this.correctedRA,12)),this.correctedDEC<-90&&(this.correctedDEC=R(-180,this.correctedDEC),this.correctedRA=W(this.correctedRA,12)),this.correctedRA=X.mapTo24Hour(this.correctedRA)}}getPolarisHA(t,e,o){const n=Y.toUTC(t);this.precessionCorrection(n,e);let i=R(Y.utcToLST(n,o),this.correctedRA);return e<0&&(i=i<0?Math.abs(i):-i),{ha:i}}getPolarisHourAngle(t,e,o,n){const i=Y.toUTC(t);this.precessionCorrection(i,e);const r=Y.calculateLST(t,o);let s=Number(R(r,n)).toFixed(6),a=Number(R(r,this.correctedRA)).toFixed(6);return s<0&&(s=W(24,s)),a<0&&(a=W(24,a)),{hourAnglePolaris:s,plusHourAnglePolaris:a}}haToDegrees(t){return D(E(360,t),24)}};class V{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.color=t.color||"red",this.radius=t.radius||5,this.hiddenRadius=W(this.radius,1),this.direction=t.direction&&"clockwise"===t.direction?W:R,this.angle=t.startAngle||0,this.speed=t.speed||1}setupPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,e=arguments.length>1?arguments[1]:void 0;this.points=t!==e&&e?H(t,e):B(t)}increment(){this.angle=this.direction(this.angle,this.speed),this.angle<0?this.angle=360:this.angle>360&&(this.angle=0)}getCurrentPosition(t,e){return{x:this.direction(t.x,this.points[this.angle].x),y:this.direction(t.y,this.points[this.angle].y),radius:e?this.radius:this.hiddenRadius,color:e?this.color:"black"}}getHiddenPosition(t){return this.getCurrentPosition(t,!1)}getVisablePosition(t){return this.getCurrentPosition(t,!0)}}class J extends V{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),t.xRadius&&this.setupPoints(t.xRadius,t.yRadius),t.isFixedCenter&&t.centerPoints&&(this.centerPts=t.centerPoints)}getInitialPosition(t){const e=this.centerPts?this.centerPts:t;return this.getVisablePosition(e)}getNextPosition(t){const e=this.centerPts?this.centerPts:t;return this.hidden=this.getHiddenPosition(e),this.increment(),this.visable=this.getVisablePosition(e),{hidden:this.hidden,visable:this.visable}}getPoint(){return{hidden:{x:this.hidden.x,y:this.hidden.y},visable:{x:this.visable.x,y:this.visable.y}}}}const G=(t,e,o,n)=>{const{hourAnglePolaris:i,plusHourAnglePolaris:r}=q.getPolarisHourAngle(t,e,o,n);return{hourAnglePolaris:Number(E(i,15)).toFixed(2),plusHourAnglePolaris:Number(E(r,15)).toFixed(2)}};class K extends J{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.speed=0,this.latitude=t.latitude,this.longitude=t.longitude,this.rightAssention=t.rightAssention,this.clockTime=t.clockTime||new Date;const{hourAnglePolaris:e,plusHourAnglePolaris:o}=G(this.clockTime,this.latitude,this.longitude,this.rightAssention);this.hourAngle=o,this.altHourAngle=e,this.angle=Math.floor(this.hourAngle),this.clockwise=t.direction&&"clockwise"===t.direction}setupPoints(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;this.points=B(t)}increment(){this.clockTime=new Date;const{hourAnglePolaris:t,plusHourAnglePolaris:e}=G(this.clockTime,this.latitude,this.longitude,this.rightAssention);this.hourAngle=e,this.altHourAngle=t,this.angle=2*Math.floor(this.hourAngle),this.angle<0?this.angle=360:this.angle>360&&(this.angle=0)}getNextPosition(t){this.increment(),this.key=this.angle,this.clockwise&&(this.angle<90?this.key=W(this.angle,90):(this.angle>=90&&this.angle<180||this.angle>=180&&this.angle<270)&&(this.key=R(this.angle,90)));const e={x:this.direction(t.x,this.points[this.key].x),y:this.direction(t.y,this.points[this.key].y),radius:this.radius,color:this.color};return{hidden:e,visable:e}}}let Q;function Z(t,e,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["12/6","0/0","18/9","6/3"];window.canvasRef.circle(t,e,o,{color:"red"}),window.canvasRef.line(t,e-o,t,e+o,{color:"red"}),window.canvasRef.line(t-o,e,t+o,e,{color:"red"});for(let n=0;n<360;n+=15)window.canvasRef.line(t-o,e,t+o,e,{rotateAngle:n,color:"red"});window.canvasRef.circle(t,e,o-20,{color:"black",fillStrokeClear:"fill"}),window.canvasRef.line(t,e-o,t,e+o,{color:"red"}),window.canvasRef.line(t-o,e,t+o,e,{color:"red"});const i=10*n[0].length/2,r=10*n[1].length/2,s=10*n[2].length+5;window.canvasRef.addtext(t-i,e-o-10,n[0],{color:"red"}),window.canvasRef.addtext(t-r,e+o+20,n[1],{color:"red"}),window.canvasRef.addtext(t-o-s,e,n[2],{color:"red"}),window.canvasRef.addtext(t+o+10,e,n[3],{color:"red"})}function _(){const t=document.getElementById("latitude").value||37.6904826,e=document.getElementById("longitude").value||-122.47267,o=document.getElementById("polarisRA").value.split(" "),n=document.getElementById("polarisDec").value.split(" "),i=X.hourAngleToDegrees(n[0]||89,n[1]||27,0),r=X.hourAngleToDegrees(o[0]||2,o[1]||31,0),s=new Date,{hourAnglePolaris:a,plusHourAnglePolaris:l}=q.getPolarisHourAngle(s,t,e,r),c=X.hoursMinutesSeconds(a),d=X.hoursMinutesSeconds(l),{ha:h}=q.getPolarisHA(s,t,e,e),u=X.hoursMinutesSeconds(h);window.canvasRef.rectangle(40,20,700,300,{color:"black",fillStrokeClear:"fill"}),Z(200,180,150),Z(550,180,100,["0","6","9","3"]);let g=0;const f={x:550,y:180};Q||(Q=new K({color:"#fff",radius:6,direction:"clockwise",isFixedCenter:!0,clockTime:s,centerPoints:{x:550,y:180},xRadius:80,yRadius:80,startAngle:0,latitude:t,longitude:e,rightAssention:r})),Q&&(g=Q.getNextPosition(f).visable,window.canvasRef.circle(g.x,g.y,g.radius,{color:g.color,fillStrokeClear:"fill"})),window.polarSPref=Q,window.canvasRef.rectangle(50,390,800,500,{color:"black",fillStrokeClear:"fill"}),window.canvasRef.rectangle(50,410,800,500,{color:"black",fillStrokeClear:"fill"}),window.canvasRef.rectangle(50,430,800,500,{color:"black",fillStrokeClear:"fill"}),window.canvasRef.rectangle(50,450,800,500,{color:"black",fillStrokeClear:"fill"});const w=t=>Number(t).toFixed(6);window.canvasRef.addtext(50,410,`Using RA, Dec: ${w(r)} / ${w(i)} corrected: ${w(q.correctedRA)} / ${w(q.correctedDEC)}`,{color:"red"}),window.canvasRef.addtext(50,430,`Polaris hour angle: ${w(a)} | ${w(l)} or ${w(h)} `,{color:"red"}),window.canvasRef.addtext(50,450,`Clock time: ${c} | ${d} or ${u} `,{color:"red"}),window.canvasRef.addtext(50,470,`Polaris position time: ${Q.angle}  ${Q.key}`,{color:"red"})}var tt;tt=function(){const t=document.getElementById("main-window"),e=window.getComputedStyle(t),o=(new S("Polaris Hour Angle",e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight,"main-window"),F("polaris-hour","canvas-container",800,500));window.canvasRef=o,_(),window.setInterval(_,5e3)},s.onLoadEventStack.push(tt)})();