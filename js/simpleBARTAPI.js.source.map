{"version":3,"file":"simpleBARTAPI.js","sources":["webpack://javascripts/simpleBARTAPI.js"],"sourcesContent":["(()=>{var t={757:(t,e,n)=>{n(666)},666:t=>{var e=function(t){\"use strict\";var e,n=Object.prototype,o=n.hasOwnProperty,r=\"function\"==typeof Symbol?Symbol:{},i=r.iterator||\"@@iterator\",a=r.asyncIterator||\"@@asyncIterator\",c=r.toStringTag||\"@@toStringTag\";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},\"\")}catch(t){s=function(t,e,n){return t[e]=n}}function d(t,e,n,o){var r=e&&e.prototype instanceof y?e:y,i=Object.create(r.prototype),a=new W(o||[]);return i._invoke=function(t,e,n){var o=u;return function(r,i){if(o===p)throw new Error(\"Generator is already running\");if(o===m){if(\"throw\"===r)throw i;return M()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var c=S(a,n);if(c){if(c===h)continue;return c}}if(\"next\"===n.method)n.sent=n._sent=n.arg;else if(\"throw\"===n.method){if(o===u)throw o=m,n.arg;n.dispatchException(n.arg)}else\"return\"===n.method&&n.abrupt(\"return\",n.arg);o=p;var s=l(t,e,n);if(\"normal\"===s.type){if(o=n.done?m:f,s.arg===h)continue;return{value:s.arg,done:n.done}}\"throw\"===s.type&&(o=m,n.method=\"throw\",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:\"normal\",arg:t.call(e,n)}}catch(t){return{type:\"throw\",arg:t}}}t.wrap=d;var u=\"suspendedStart\",f=\"suspendedYield\",p=\"executing\",m=\"completed\",h={};function y(){}function g(){}function w(){}var v={};v[i]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(I([])));x&&x!==n&&o.call(x,i)&&(v=x);var E=w.prototype=y.prototype=Object.create(v);function L(t){[\"next\",\"throw\",\"return\"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(r,i,a,c){var s=l(t[r],t,i);if(\"throw\"!==s.type){var d=s.arg,u=d.value;return u&&\"object\"==typeof u&&o.call(u,\"__await\")?e.resolve(u.__await).then((function(t){n(\"next\",t,a,c)}),(function(t){n(\"throw\",t,a,c)})):e.resolve(u).then((function(t){d.value=t,a(d)}),(function(t){return n(\"throw\",t,a,c)}))}c(s.arg)}var r;this._invoke=function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}}function S(t,n){var o=t.iterator[n.method];if(o===e){if(n.delegate=null,\"throw\"===n.method){if(t.iterator.return&&(n.method=\"return\",n.arg=e,S(t,n),\"throw\"===n.method))return h;n.method=\"throw\",n.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return h}var r=l(o,t.iterator,n.arg);if(\"throw\"===r.type)return n.method=\"throw\",n.arg=r.arg,n.delegate=null,h;var i=r.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,\"return\"!==n.method&&(n.method=\"next\",n.arg=e),n.delegate=null,h):i:(n.method=\"throw\",n.arg=new TypeError(\"iterator result is not an object\"),n.delegate=null,h)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type=\"normal\",delete e.arg,t.completion=e}function W(t){this.tryEntries=[{tryLoc:\"root\"}],t.forEach(D,this),this.reset(!0)}function I(t){if(t){var n=t[i];if(n)return n.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:e,done:!0}}return g.prototype=E.constructor=w,w.constructor=g,g.displayName=s(w,c,\"GeneratorFunction\"),t.isGeneratorFunction=function(t){var e=\"function\"==typeof t&&t.constructor;return!!e&&(e===g||\"GeneratorFunction\"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,s(t,c,\"GeneratorFunction\")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},L(T.prototype),T.prototype[a]=function(){return this},t.AsyncIterator=T,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new T(d(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(E),s(E,c,\"Generator\"),E[i]=function(){return this},E.toString=function(){return\"[object Generator]\"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=I,W.prototype={constructor:W,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)\"t\"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(\"throw\"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return c.type=\"throw\",c.arg=t,n.next=o,r&&(n.method=\"next\",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if(\"root\"===a.tryLoc)return r(\"end\");if(a.tryLoc<=this.prev){var s=o.call(a,\"catchLoc\"),d=o.call(a,\"finallyLoc\");if(s&&d){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!d)throw new Error(\"try statement without catch or finally\");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,\"finallyLoc\")&&this.prev<r.finallyLoc){var i=r;break}}i&&(\"break\"===t||\"continue\"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method=\"next\",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if(\"throw\"===t.type)throw t.arg;return\"break\"===t.type||\"continue\"===t.type?this.next=t.arg:\"return\"===t.type?(this.rval=this.arg=t.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),N(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if(\"throw\"===o.type){var r=o.arg;N(n)}return r}}throw new Error(\"illegal catch attempt\")},delegateYield:function(t,n,o){return this.delegate={iterator:I(t),resultName:n,nextLoc:o},\"next\"===this.method&&(this.arg=e),h}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function(\"r\",\"regeneratorRuntime = r\")(e)}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}(()=>{\"use strict\";n(757);function t(t,e,n){return n instanceof t||(typeof n).toLowerCase()===e}function e(e){return t(String,\"string\",e)}function o(e){return t(Object,\"object\",e)}function r(t){let e=t.nodeName;return e=e||\"\",\"textarea\"===e.toLowerCase()}function i(t){let e=typeof t,n=t.nodeName;return n=n||\"\",\"input\"===n.toLowerCase()||\"input\"===e.toLowerCase()&&void 0!==e.type}const a=/^#(?:([\\w-]+)|(\\w+)|\\.([\\w-]+))$/;function c(t,n){let r,i={},c=t;i.length=0,i.objectName=\"selector\";const s=n||document;if(!e(c)&&o(c)&&c.hasOwnProperty(\"objectName\")&&\"selector\"===c.objectName)return c;t instanceof HTMLElement&&(t.id?c=\"#\"+t.id:(c=t.nodeName.toLowerCase(),t.className.length>0&&(c+=\".\"+t.className.split(\" \").join(\" .\")))),a.test(c)?(r=s.querySelector(c),r=r?[r]:[]):(r=s.querySelectorAll(c),r=r&&r.length>0?r:[]),i.length=r.length,i.get=function(t){return r[t]},i.toArray=function(){return Array.from(r)},i.each=function(t){i.toArray().forEach(t)};for(let t=0;t<i.length;t++)i[t]=r[t];return i}var s,d;d=(s=window.navigator).appVersion;const l={capabilitiesDetected:!1,hasJscript:!1,hasActiveX:!1,isDOMCapable:!1,isAJAXCapable:!1,hasCookiesEnabled:s.cookieEnabled,name:s.appName,uaName:s.appName,OS:s.platform,uaOS:s.platform,userAgent:s.userAgent,appVersion:parseFloat(d,10),uaAppVersion:parseFloat(d,10),version:parseFloat(d,10),uaOSVersion:\"\",onLoadEventStack:[],onDOMReadyEventStack:[],touchEnabled:!1,includeStack:[],scriptLoadStack:[],scriptLocation:\"\"};let u,f,p,m;window.attachEvent&&!window.addEventListener?u=function(t,e,n,o){if(!t.attachEvent(\"on\"+e,n))throw\"Event \"+e+\" could not be added!\"}:window.addEventListener&&(u=function(t,e,n,o){const r=o||!1;t.addEventListener(e,n,r)}),window.detachEvent&&!window.removeEventListener?f=function(t,e,n,o){if(!t.detachEvent(\"on\"+e,n))throw\"Event \"+e+\" could not be removed!\"}:window.removeEventListener&&(f=function(t,e,n,o){t.removeEventListener(e,n,o)});const h=function(t){return window.event?window.event:t},y=function(t){const e=h(t);let n;return e.srcElement?n=e.srcElement:e.target&&(n=e.target),n},g=function(t){const e=h(t);let n=0;return e.pageX?n=e.pageX:e.clientX&&(n=e.clientX),n},w=function(t){const e=h(t);let n=0;return e.pageY?n=e.pageY:e.clientY&&(n=e.clientY),n};document.createEvent&&(p=function(t,e,n){let o=document.createEvent(\"Event\");if(o)return n||(n={}),n.canBubble||(n.canBubble=!0),n.cancellable||(n.cancellable=!0),o.initEvent(\"Event\",n.canBubble,n.cancellable),o},m=function(t){document.dispatchEvent(t)});u(window,\"load\",(function(){let t,e,n=l.onLoadEventStack;t=n.length;for(let o=0;o<t;o+=1)e=n[o],e&&\"function\"===(typeof e).toLowerCase()&&e()}),!1);const v=function(t,e){-1===t.className.indexOf(e)&&(t.className+=\" \"+e)},b=function(t,n,o){let r,i=document.body;if(n&&e(n)?i=document.getElementById(n):n&&(i=n),!t)return i;if(o&&o.id&&(r=document.getElementById(o.id)),r||(r=document.createElement(t)),!r)return r;if(i.appendChild(r),r&&o){let t;for(t in o)try{r[t]=o[t]}catch(t){}o.className&&v(r,o.className)}return r},x=function(n,a,s){let d,l,u=c(n);if(!(u.length<=0)&&(s||(s=0),!(s>=u.length)&&u[s]))return d=u.get(s),l=new String(d.tagName).toLowerCase(),(a||\"\"===a)&&function(n,a){e(n)||t(Number,\"number\",n)?i(l)||i(a)||r(a)?a.value=n:a.innerHTML=n:a&&o(n)&&a.appendChild(n)}(a,d),i(l)||i(d)||r(d)?d.value:e(d.innerHTML)?d.innerHTML:void 0};const E=async function(t,e){const n=await fetch(t,e);return await n.text()},L=\"https://api.bart.gov\",T=\"&json=y&key=\".concat(\"MW9S-E7SL-26DU-VV8V\"),S=\"\".concat(L,\"/api/stn.aspx?cmd=stns\").concat(T),D=\"\".concat(L,\"/api/etd.aspx?cmd=etd\").concat(T,\"&orig=\"),N=\"\".concat(L,\"/api/sched.aspx?cmd=fare\").concat(T,\"&orig=\"),W=\"\".concat(L,\"/api/sched.aspx?cmd=depart\").concat(T,\"&b=0&a=3&orig=\"),I=(\"\".concat(L,\"/api/sched.aspx?cmd=arrive\").concat(T,\"&b=2&a=1&orig=\"),\"\".concat(L,\"/api/bsa.aspx?cmd=bsa\").concat(T));async function M(t){const e=await E(t);return JSON.parse(e)}function k(t,e,n){return\"\".concat(t).concat(\"&dest=\").concat(e).concat(\"&date=\").concat(n)}function O(){this.index=0,this.list={}}function A(){this.data=new O,this.keys={}}O.prototype.add=function(t,e){this.list[t]=e,this.index++},O.prototype.remove=function(t){this.list[t]=void 0,this.index--},O.prototype.get=function(t){return this.list[t]},O.prototype.clear=function(){for(let t in this.list)t&&(this.list[t]=void 0);this.index=0},A.prototype.setItem=function(t,e){this.data.add(t,e),this.keys[t]=e},A.prototype.getItem=function(t){return this.data.get(t)},A.prototype.removeItem=function(t){this.keys[t]=void 0,this.data.remove(t)},A.prototype.key=function(t){return this.keys[t]},A.prototype.clear=function(){this.data.clear(),this.keys=[]};const B=function(){let t=!1;if(window.sessionStorage)try{window.sessionStorage.setItem(\"testData\",\"dunny\"),window.sessionStorage.removeItem(\"testData\"),t=!0}catch(t){}return t}(),j=function(){let t=!1;try{window.localStorage&&(window.localStorage.setItem(\"testData\",\"dunny\"),window.localStorage.removeItem(\"testData\"),t=!0)}catch(t){}return t}(),C=(B?window.sessionStorage:new A,j?window.localStorage:new A);const F=\"SimpleBARTAPIStationList\",H=\"SimpleBARTAPIStationListTime\";async function P(t=!1){let e=[];if(j){const t=C.getItem(H),n=(new Date).getTime()-6048e5;if(t&&t>n){const t=C.getItem(F);t&&(e=JSON.parse(t))}}if(e&&0!==e.length||(e=await async function(){return(await M(S)).root.stations.station.map((t=>({name:t.name,abbr:t.abbr})))}(),j&&C.setItem(H,(new Date).getTime())),!e||0===e.length)throw\"Could not get stations!\";if(j&&C.setItem(F,JSON.stringify(e)),t){const t={};return(await P()).forEach((e=>{t[e.abbr]=e.name})),t}return e}async function _(t){const e=await async function(t){const e=await M(\"\".concat(D).concat(t)),n=\"\".concat(e.root.date,\" \").concat(e.root.time);return e.root.station[0].etd?e.root.station[0].etd.map((t=>{const e=t.estimate.map((t=>({minutes:t.minutes,platform:t.platform,direction:t.direction,delay:t.delay}))).reduce(((t,e)=>({minutes:\"\".concat(t.minutes,\", \").concat(e.minutes),platform:\"\".concat(t.platform,\", \").concat(e.platform),direction:e.direction,delay:\"\".concat(t.delay,\", \").concat(e.delay)})));return{destination:t.destination,abbreviation:t.abbreviation,dateTime:n,minutes:e.minutes,platform:e.platform,direction:e.direction,delay:e.delay}})):[]}(t);if(!e)throw\"Could not get trains!\";if(0===e.length)return'<div id=\"bart-train-list\">No trains found</div>';const n=e.sort(((t,e)=>\"North\"===t.direction?1:-1)).map((t=>\"<div>\\n            Train: \".concat(t.destination,\"\\n            <br>Times: \").concat(t.minutes,\"\\n            <br>Platform: \").concat(t.platform,\"\\n            <br>Direction: \").concat(t.direction,\"\\n            <br>Delays: \").concat(t.delay,\"\\n               </div>\"))).reduce(((t,e)=>t+e));return'<div id=\"bart-train-list\">'.concat(n,\"</div>\")}async function X(t){const e=await async function(){const t=await M(I),e=\"\".concat(t.root.date,\" \").concat(t.root.time);return t.root.bsa.map((t=>({dateTime:e,station:t.station,description:t.description})))}();if(!e)throw\"Could not get alerts!\";const n=e.map((t=>\"<div>\\n                  Date Time: \".concat(t.dateTime,\"\\n                  <br><br>Station: \").concat(t.station,\"\\n                  <br><br>Description: \").concat(t.description[\"#cdata-section\"],\"\\n               </div>\"))).reduce(((t,e)=>t+e));return'<div id=\"bart-alert-list\">'.concat(n,\"</div>\")}const Y=\"<option>Please Select A Station</option>\";async function J(t,e,n){const o=document.getElementById(t),r=document.getElementById(e);if(0===o.selectedIndex||0===r.selectedIndex)return;const i=o.options[o.selectedIndex].value,a=r.options[r.selectedIndex].value,c=(await async function(t,e){return await M(\"\".concat(N).concat(t).concat(\"&dest=\").concat(e))}(i,a)).root.fares.fare.map((t=>\"\".concat(t[\"@name\"],\": \").concat(t[\"@amount\"]))).reduce(((t,e)=>\"\".concat(t,\"<br>\").concat(e)));document.getElementById(n).innerHTML=c}const z=\"<option>Please Select A Station</option>\";const R={monthNames:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],monthShortNames:[\"Jan \",\"Feb \",\"Mar \",\"Apr \",\"May \",\"Jun \",\"Jul \",\"Aug \",\"Sep \",\"Oct \",\"Nov \",\"Dec \"],numberOfDaysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],weekDayShortNames:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],weekDayNames:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],getFirstOfMonthDayOfWeek:function(t){let e,n=t?new Date(t.getTime()):new Date;return n.setDate(1),e=n.getDay(),e},getDaysInMonth:function(t){const e=t?new Date(t.getTime()):new Date,n=e.getMonth(),o=e.getFullYear();return 1===n?o%4==0?o%400==0?29:o%100==0?28:29:28:R.numberOfDaysInMonth[n]},setFullDate:function(t,e,n){return new Date(n,t,e)},getAMPM:function(t){return t.getHours()>11?\" PM\":\" AM\"}},G=R,{weekDayShortNames:V,monthShortNames:q}=G;function U(){let t=this,e=function(e,n){let o,r,i=t;return o=h(e),r=y(o),i.moving&&i.dragableCoverMask.id===r.id&&(i.posX=g(),i.posY=w(),i[n].style.left=i.posX-i.offsetX+\"px\",i[n].style.top=i.posY-i.offsetY+\"px\"),i},n=function(){let t;window.getSelection?(t=window.getSelection(),t&&t.empty?t.empty():t&&t.removeAllRanges&&t.removeAllRanges()):document.selection&&document.selection.clear?document.selection.clear():document.selection&&document.selection.empty&&document.selection.empty()};const o=function(e,n,o){const r=c(\"#\"+n).get(0),i=c(\"#\"+(o||n)).get(0);r&&i&&(e?(t.dragableObjects[i.id]=r,u(i,\"mousedown\",t.mousedown,!1)):(t.dragableObjects[i.id]=null,f(i,\"mousedown\",t.mousedown,!1)))};return t.dragableObjects=[],t.initialize=function(){const e=t;e.isInitialized||(e.dragableCoverMask=c(\"#-dragndrop-enabled-x\").get(0),e.dragableCoverMask||(e.dragableCoverMask=b(\"div\",document.body),e.dragableCoverMask.id=\"-dragndrop-enabled-x\"),e.dragableCoverMask.style.display=\"none\",u(document,\"mousemove\",e.mousemove,!1),u(document,\"mouseup\",e.mouseup,!1),e.isInitialized=!0)},t.findDragableParent=function(e){const n=t;if(e&&e.nodeName&&\"body\"!==e.nodeName.toLowerCase())return n.dragableObjects[e.id]?e:n.findDragableParent(e.parentNode)},t.mousemove=function(t){return e(t,\"dragableCoverMask\"),n(),!1},t.mouseup=function(t){const o=e(t,\"currentDragObject\");o.dragableCoverMask.style.display=\"none\",o.currentDragObject=null,o.moving=!1,n()},t.mousedown=function(e){const n=t,o=h(e);let r=y(o);if(r=n.findDragableParent(r),!n.dragableObjects[r.id])return n.moving=!1,!1;n.currentDragObject=n.dragableObjects[r.id],document.body.appendChild(n.currentDragObject),n.posX=g(),n.posY=w(),n.offsetX=n.posX-n.currentDragObject.offsetLeft,n.offsetY=n.posY-n.currentDragObject.offsetTop;let i=n.dragableCoverMask;return i.style.position=\"absolute\",i.style.display=\"block\",i.style.border=\"2px solid black\",i.style.left=n.currentDragObject.offsetLeft+\"px\",i.style.top=n.currentDragObject.offsetTop+\"px\",i.style.width=n.currentDragObject.offsetWidth+\"px\",i.style.height=n.currentDragObject.offsetHeight+\"px\",i.style.zIndex=1e5,n.moving=!0,!1},t.setDragable=function(t,e){o(!0,t,e)},t.setNONDragable=function(t,e){o(!1,t,e)},t}function $(t,e,n,o,r,i){var a,s;const d=c(\"#\"+i).get(0);d?(this.mainWindow=d,this.titleBar=c(\".WebWindowTitle\",this.mainWindow).get(0),this.titleBar.id=\"WebWindowTitle\"+i,this.windowArea=c(\".WebWindowArea\",this.mainWindow).get(0),this.windowArea.id=\"WebWindowArea\"+i,this.footerArea=c(\".WebWindowFooter\",this.mainWindow).get(0),this.footerArea.id=\"WebWindowFooter\"+i):(this.mainWindow=b(\"div\",document.body,{className:\"WebWindowMain\",id:i}),this.mainWindow.style.left=e+\"px\",this.mainWindow.style.top=n+\"px\",this.mainWindow.style.width=o+\"px\",this.mainWindow.style.height=r+\"px\",this.titleBar=b(\"div\",this.mainWindow,{className:\"WebWindowTitle\",id:\"WebWindowTitle\"+i}),this.windowArea=b(\"div\",this.mainWindow,{className:\"WebWindowArea\",id:\"WebWindowArea\"+i}),this.footerArea=b(\"div\",this.mainWindow,{className:\"WebWindowFooter\",id:\"WebWindowFooter\"+i})),b(\"span\",this.titleBar,{className:\"WebWindowTitleText\"}).innerHTML=t;let l={className:\"WebWindowButtonBox\"};var u=b(\"span\",this.titleBar,l);l={name:\"WW\"+i,onsubmit:\"return false;\"};var f=b(\"form\",u,l);this.maximize=function(){return!1},this.minimize=function(){return!1},this.destroy=function(){return!1},(a=function(t,e,n,o,r){let i,a,c;for(c=b(\"button\",t,{className:\"WebWindowButton\",name:n,id:n+e}),c.innerHTML=o,c.onclick=r,a=t.innerHTML,a=a.toLowerCase(),i=new RegExp(\"button class\");a.match(i);)a=a.replace(i,'button type=\"button\" class')})(f,i,\"rollup\",\"-\",this.minimize),a(f,i,\"rolldown\",\"o\",this.maximize),a(f,i,\"destroy\",\"X\",this.destroy),this.windowArea.style.width=o+\"px\",this.titleBar.style.width=o+\"px\",this.footerArea.style.width=o+\"px\",s=r-this.titleBar.offsetHeight-this.footerArea.offsetHeight,this.windowArea.style.height=s+\"px\",this.dragndrop=new U}function K(){document.getElementById(\"slist\").style.display=\"none\";document.getElementById(\"tlist\").style.display=\"none\";const t=document.getElementById(\"fare-list\");t&&(t.style.display=\"none\");const e=document.getElementById(\"trips-list\");e&&(e.style.display=\"none\")}async function Q(){K();document.getElementById(\"slist\").style.display=\"block\";document.getElementById(\"tlist\").style.display=\"block\"}async function Z(){await J(\"fares-source\",\"fares-destination\",\"fare-results\")}$.prototype.popToFront=function(t){var e;e=h(t),function(t,e,n){let o,r,i,a;if(r=c(t),!(r.length<=0)&&(o=r.get(0),n&&n<r.length&&(o=r.get(n)),o))i=function(t,e){let n;t?(n=t.parentNode,n&&(n.nodeName.toLowerCase()!==e?i(n,e):a=n)):a=null},i(o,e)}(y(e),\"div.WebWindowMain\")},$.prototype.enableDrag=function(){var t=this.popToFront;this.dragndrop.initialize(),this.dragndrop.setDragable(this.mainWindow.id,this.titleBar.id),u(this.mainWindow,\"mousedown\",t,!1)},$.prototype.disableDrag=function(){var t=this.popToFront;this.dragndrop.initialize(),this.dragndrop.setNONDragable(this.mainWindow.id,this.titleBar.id),f(this.mainWindow,\"mousedown\",t,!1)},$.prototype.setTitle=function(t){var e=this.titleBar.getElementsByTagName(\"span\");e&&e.length>0&&(e[0].innerHTML=t)},$.prototype.setContent=function(t){x(this.windowArea,t)};async function tt(){K();const t=document.getElementById(\"slist\").parentNode,e=await async function(){const t=(await P()).map((t=>'<option value=\"'.concat(t.abbr,'\">').concat(t.name,\"</option>\"))).reduce(((t,e)=>t+e)),e='<div class=\"styled-dropdown\"><select id=\"fares-source\">'.concat(Y).concat(t,\"</select></div>\"),n='<div class=\"styled-dropdown\"><select id=\"fares-destination\">'.concat(Y).concat(t,\"</select></div>\");return\"Starting Station: \".concat(e,\"<br>Destination Station: \").concat(n,'<br><br><div id=\"fare-results\"></div>')}(),n=b(\"div\",t,{id:\"fare-list\"});n.innerHTML=e,n.style.display=\"block\",c(\"div#fare-list select\").each((t=>{u(t,\"change\",Z)}))}async function et(){const t=document.getElementById(\"trip-source\"),e=document.getElementById(\"trip-destination\"),n=document.getElementById(\"trip-time\");if(0===t.selectedIndex||0===e.selectedIndex)return;const o=t.options[t.selectedIndex].value,r=e.options[e.selectedIndex].value,i=await async function(t,e,n){return await M(\"\".concat(W).concat(k(t,e,n)))}(o,r,n.value),a=await P(!0),c=i.root.schedule.request.trip.map((t=>{const e=t[\"@origin\"],n=t[\"@destination\"];let o='<div class=\"trip-header\">From: '.concat(a[e],\" (\").concat(t[\"@origTimeDate\"],\" \").concat(t[\"@origTimeMin\"],\")\");o+=\"&nbsp;&nbsp;&nbsp;To: \".concat(a[n],\" (\").concat(t[\"@destTimeDate\"],\" \").concat(t[\"@destTimeMin\"],\")</div>\");const r=t.leg.map((t=>{const e=t[\"@origin\"],n=t[\"@destination\"];let o='<div class=\"trip-legs\">Train: '.concat(t[\"@trainHeadStation\"]);return o+=\"<br>&nbsp;&nbsp;From: \".concat(a[e],\" (\").concat(t[\"@origTimeDate\"],\" \").concat(t[\"@origTimeMin\"],\")\"),o+=\"<br>&nbsp;&nbsp;&nbsp;&nbsp;To: \".concat(a[n],\" (\").concat(t[\"@destTimeDate\"],\" \").concat(t[\"@destTimeMin\"],\")</div>\"),o})).reduce(((t,e)=>\"\".concat(t).concat(e)));return\"<div>\".concat(o).concat(r,\"</div>\")})).reduce(((t,e)=>\"\".concat(t,\"<br>\").concat(e)));document.getElementById(\"trip-results\").innerHTML=c}async function nt(){K();const t=document.getElementById(\"slist\").parentNode,e=await async function(){const t=(await P()).map((t=>'<option value=\"'.concat(t.abbr,'\">').concat(t.name,\"</option>\"))).reduce(((t,e)=>t+e)),e='<div class=\"styled-dropdown\"><select id=\"trip-source\">'.concat(z).concat(t,\"</select></div>\"),n='<div class=\"styled-dropdown\"><select id=\"trip-destination\">'.concat(z).concat(t,\"</select></div>\");let o=(new Date).getHours(),r=\"AM\";0===o?o=12:o>12&&(o-=12,r=\"PM\");const i='<input type=\"hidden\" value=\"'.concat(\"now\",'\" name=\"trip-time\" id=\"trip-time\">');return\"Starting Station: \".concat(e,\"<br>Destination Station: \").concat(n,\"<br>\").concat(i,'<br><br><div id=\"trip-results\"></div>')}(),n=b(\"div\",t,{id:\"trips-list\"});n.innerHTML=e,n.style.display=\"block\",c(\"div#trips-list select\").each((t=>{u(t,\"change\",et)}))}var ot;ot=async function(){const t=await async function(){const t=(await P()).map((t=>'<div data-abbr=\"'.concat(t.abbr,'\">').concat(t.name,\"</div>\"))).reduce(((t,e)=>t+e));return'<div id=\"bart-stations-list\">'.concat(t,\"</div>\")}(),e=function(){const t=document.getElementById(\"main-window\"),e=window.getComputedStyle(t);return new $(\"BART Info\",e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight,\"main-window\")}().windowArea,n=b(\"div\",e,{id:\"slist\"}),o=b(\"div\",e,{id:\"tlist\"});n.innerHTML=t,u(e,\"click\",(async function(t){const e=y(t);if(!e)return;if(\"DIV\"!==e.nodeName.toUpperCase())return;if(!e.attributes[\"data-abbr\"])return;const n=e.attributes[\"data-abbr\"].value,r=await _(n);o.innerHTML=r})),await async function(){const t=await E(\"/frags/bart-nav.frag\");document.getElementById(\"menu\").innerHTML=t.replace(/\\n/g,\"\")}();const r=c(\".url-wrapper select\").get(0);u(r,\"change\",(t=>{const e=h(t),n=y(e);switch(n.options[n.selectedIndex].text.toLowerCase()){case\"alerts\":Q(),async function(t){const e=await X();o.innerHTML=e}();break;case\"train list\":Q();break;case\"fare estimator\":tt();break;case\"trip planner\":nt()}}))},l.onLoadEventStack.push(ot)})()})();"],"mappings":"AAAA","sourceRoot":""}